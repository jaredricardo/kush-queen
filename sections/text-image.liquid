{% liquid
  assign section_id = section.id
%}

<style>
  #shopify-section-{{ section_id }} .image-with-text-wrapper {
    background-color: {{ section.settings.section_bg_color }};
    padding-top: {{ section.settings.section_padding_top_mobile }}px;
    padding-bottom: {{ section.settings.section_padding_bottom_mobile }}px;
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section_id }} .image-with-text-wrapper {
      padding-top: {{ section.settings.section_padding_top_desktop }}px;
      padding-bottom: {{ section.settings.section_padding_bottom_desktop }}px;
    }
  }

  #shopify-section-{{ section_id }} .image-with-text-container {
    display: flex;
    flex-direction: column;
    gap: {{ section.settings.content_spacing_mobile }}px;
    align-items: {{ section.settings.layout_alignment }};
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section_id }} .image-with-text-container {
      flex-direction: {{ section.settings.layout_direction }};
      gap: {{ section.settings.content_spacing_desktop }}px;
      align-items: center;
    }
  }

  #shopify-section-{{ section_id }} .image-container {
    width: 100%;
    {% if section.settings.image_bg_color != blank %}
      background-color: {{ section.settings.image_bg_color }};
    {% endif %}
    border-radius: {{ section.settings.image_border_radius }}px;
    overflow: hidden;
    position: relative;
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section_id }} .image-container {
      width: {{ section.settings.image_width_desktop }}%;
      flex-shrink: 0;
    }
  }

  #shopify-section-{{ section_id }} .image-wrapper {
    position: relative;
    width: 100%;
    aspect-ratio: {{ section.settings.image_aspect_ratio }};
  }

  #shopify-section-{{ section_id }} .image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  #shopify-section-{{ section_id }} .content-container {
    width: 100%;
    display: flex;
    flex-direction: column;
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section_id }} .content-container {
      flex: 1;
    }
  }

  {% if section.settings.heading_text != blank %}
    #shopify-section-{{ section_id }} .content-heading {
      color: {{ section.settings.heading_color }};
      font-size: {{ section.settings.heading_font_size_mobile }}px;
      font-weight: {{ section.settings.heading_font_weight }};
      line-height: {{ section.settings.heading_line_height_mobile }};
      margin: 0 0 {{ section.settings.heading_margin_bottom_mobile }}px 0;
      text-align: {{ section.settings.content_alignment_mobile }};
    font-family: 'Room205';
    text-wrap: balance;
    }

    @media (min-width: 768px) {
      #shopify-section-{{ section_id }} .content-heading {
        font-size: {{ section.settings.heading_font_size_desktop }}px;
        line-height: {{ section.settings.heading_line_height_desktop }};
        margin-bottom: {{ section.settings.heading_margin_bottom_desktop }}px;
        text-align: {{ section.settings.content_alignment_desktop }};
      }
    }
  {% endif %}

  {% if section.settings.paragraph_content != blank %}
    #shopify-section-{{ section_id }} .content-text {
      color: {{ section.settings.text_color }};
      font-size: {{ section.settings.text_font_size_mobile }}px;
      font-weight: {{ section.settings.text_font_weight }};
      line-height: {{ section.settings.text_line_height_mobile }};
      margin: 0 0 {{ section.settings.text_margin_bottom_mobile }}px 0;
      text-align: {{ section.settings.content_alignment_mobile }};
    }

    @media (min-width: 768px) {
      #shopify-section-{{ section_id }} .content-text {
        font-size: {{ section.settings.text_font_size_desktop }}px;
        line-height: {{ section.settings.text_line_height_desktop }};
        margin-bottom: {{ section.settings.text_margin_bottom_desktop }}px;
        text-align: {{ section.settings.content_alignment_desktop }};
      }
    }
  {% endif %}

  {% if section.settings.button_text != blank and section.settings.button_link != blank %}
    #shopify-section-{{ section_id }} .cta-button {
      display: inline-block;
      background-color: {{ section.settings.button_bg_color }};
      color: {{ section.settings.button_text_color }};
      padding: {{ section.settings.button_padding_mobile }}px {{ section.settings.button_padding_mobile | times: 1.5 }}px;
      border-radius: {{ section.settings.button_border_radius }}px;
      font-size: {{ section.settings.button_font_size_mobile }}px;
      font-weight: {{ section.settings.button_font_weight }};
      text-decoration: none;
      text-align: center;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s ease, color 0.2s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    @media (min-width: 768px) {
      #shopify-section-{{ section_id }} .cta-button {
        padding: {{ section.settings.button_padding_desktop }}px {{ section.settings.button_padding_desktop | times: 2 }}px;
        font-size: {{ section.settings.button_font_size_desktop }}px;
      }
    }

    #shopify-section-{{ section_id }} .cta-button:hover {
      background-color: {{ section.settings.button_bg_color_hover }};
      color: {{ section.settings.button_text_color_hover }};
    }

    #shopify-section-{{ section_id }} .cta-button:focus-visible {
      outline: 2px solid {{ section.settings.button_bg_color }};
      outline-offset: 2px;
    }

    #shopify-section-{{ section_id }} .button-wrapper {
      text-align: {{ section.settings.content_alignment_mobile }};
    }

    @media (min-width: 768px) {
      #shopify-section-{{ section_id }} .button-wrapper {
        text-align: {{ section.settings.content_alignment_desktop }};
      }
    }
  {% endif %}
</style>

<div class="image-with-text-wrapper">
  <div class="page-width">
    <div class="image-with-text-container">
      {% if section.settings.image != blank %}
        <div class="image-container">
          <div class="image-wrapper">
            <img
              src="{{ section.settings.image | image_url: width: 1200 }}"
              srcset="{{ section.settings.image | image_url: width: 400 }} 400w,
                      {{ section.settings.image | image_url: width: 600 }} 600w,
                      {{ section.settings.image | image_url: width: 800 }} 800w,
                      {{ section.settings.image | image_url: width: 1200 }} 1200w"
              sizes="(min-width: 768px) {{ section.settings.image_width_desktop }}vw, 100vw"
              alt="{{ section.settings.image.alt | escape | default: section.settings.heading_text }}"
              loading="lazy"
              width="1200"
              height="{{ 1200 | divided_by: section.settings.image_aspect_ratio | round }}"
            >
          </div>
        </div>
      {% elsif request.design_mode %}
        <div class="image-container">
          <div class="image-wrapper">
            {{ 'lifestyle-1' | placeholder_svg_tag }}
          </div>
        </div>
      {% endif %}

      <div class="content-container">
        {% if section.settings.heading_text != blank %}
          <h2 class="content-heading">{{ section.settings.heading_text }}</h2>
        {% endif %}

        {% if section.settings.paragraph_content != blank %}
          <div class="content-text">{{ section.settings.paragraph_content }}</div>
        {% endif %}

        {% if section.settings.button_text != blank and section.settings.button_link != blank %}
          <div class="button-wrapper">
            <a href="{{ section.settings.button_link }}" class="cta-button">
              {{ section.settings.button_text }}
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Image with Text",
  "tag": "section",
  "class": "image-with-text-section",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "color",
      "id": "section_bg_color",
      "label": "Background color",
      "default": "#F5F5F0"
    },
    {
      "type": "range",
      "id": "section_padding_top_desktop",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Top padding (desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "section_padding_bottom_desktop",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding (desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "section_padding_top_mobile",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Top padding (mobile)",
      "default": 40
    },
    {
      "type": "range",
      "id": "section_padding_bottom_mobile",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding (mobile)",
      "default": 40
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout_direction",
      "label": "Desktop layout",
      "options": [
        {
          "value": "row",
          "label": "Image left, text right"
        },
        {
          "value": "row-reverse",
          "label": "Text left, image right"
        }
      ],
      "default": "row",
      "info": "Mobile always stacks vertically with image on top"
    },
    {
      "type": "select",
      "id": "layout_alignment",
      "label": "Vertical alignment",
      "options": [
        {
          "value": "flex-start",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "flex-end",
          "label": "Bottom"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "content_spacing_desktop",
      "min": 0,
      "max": 120,
      "step": 2,
      "unit": "px",
      "label": "Spacing between image and text (desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "content_spacing_mobile",
      "min": 2,
      "max": 80,
      "step": 1,
      "unit": "px",
      "label": "Spacing between image and text (mobile)",
      "default": 32
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "range",
      "id": "image_width_desktop",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Image width (desktop)",
      "default": 50,
      "info": "Mobile is always 100% width"
    },
    {
      "type": "range",
      "id": "image_aspect_ratio",
      "min": 0.5,
      "max": 2,
      "step": 0.1,
      "label": "Image aspect ratio",
      "default": 1.2,
      "info": "1 = square, 1.5 = portrait, 0.75 = landscape"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 60,
      "step": 1,
      "unit": "px",
      "label": "Image border radius",
      "default": 16
    },
    {
      "type": "color",
      "id": "image_bg_color",
      "label": "Image background color",
      "info": "Optional background color for image container"
    },
    {
      "type": "header",
      "content": "Content Alignment"
    },
    {
      "type": "select",
      "id": "content_alignment_desktop",
      "label": "Content alignment (desktop)",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "content_alignment_mobile",
      "label": "Content alignment (mobile)",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "text",
      "id": "heading_text",
      "label": "Heading",
      "default": "OUR NAMESAKE, KUSH QUEEN..."
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "heading_font_size_desktop",
      "min": 16,
      "max": 80,
      "step": 2,
      "unit": "px",
      "label": "Heading size (desktop)",
      "default": 48
    },
    {
      "type": "range",
      "id": "heading_font_size_mobile",
      "min": 16,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Heading size (mobile)",
      "default": 32
    },
    {
      "type": "range",
      "id": "heading_font_weight",
      "min": 300,
      "max": 900,
      "step": 100,
      "label": "Heading weight",
      "default": 700
    },
    {
      "type": "range",
      "id": "heading_line_height_desktop",
      "min": 0.8,
      "max": 2,
      "step": 0.1,
      "label": "Heading line height (desktop)",
      "default": 1.2
    },
    {
      "type": "range",
      "id": "heading_line_height_mobile",
      "min": 0.8,
      "max": 2,
      "step": 0.1,
      "label": "Heading line height (mobile)",
      "default": 1.2
    },
    {
      "type": "range",
      "id": "heading_margin_bottom_desktop",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Heading bottom margin (desktop)",
      "default": 24
    },
    {
      "type": "range",
      "id": "heading_margin_bottom_mobile",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Heading bottom margin (mobile)",
      "default": 20
    },
    {
      "type": "header",
      "content": "Paragraph Text"
    },
    {
      "type": "richtext",
      "id": "paragraph_content",
      "label": "Content",
      "default": "<p>In six years, Kush Queen has grown into a multi-million dollar, multifaceted cannabis brand manufacturing category-leading hemp, compliant cannabis, transdermal, and minor cannabinoid products. The Kush Queen product line includes award-winning cannabis infused bath bombs, transdermal topicals, flower, pre-rolls, edibles, wellness supplements, and skincare.</p><p>Like all good things, Kush Queen was born out of community; at the intersection of social media and cannabis. Here's the story of who we are and how we got here.</p>"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#333333"
    },
    {
      "type": "range",
      "id": "text_font_size_desktop",
      "min": 12,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Text size (desktop)",
      "default": 16
    },
    {
      "type": "range",
      "id": "text_font_size_mobile",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Text size (mobile)",
      "default": 14
    },
    {
      "type": "range",
      "id": "text_font_weight",
      "min": 300,
      "max": 900,
      "step": 100,
      "label": "Text weight",
      "default": 400
    },
    {
      "type": "range",
      "id": "text_line_height_desktop",
      "min": 1,
      "max": 2.5,
      "step": 0.1,
      "label": "Text line height (desktop)",
      "default": 1.6
    },
    {
      "type": "range",
      "id": "text_line_height_mobile",
      "min": 1,
      "max": 2.5,
      "step": 0.1,
      "label": "Text line height (mobile)",
      "default": 1.6
    },
    {
      "type": "range",
      "id": "text_margin_bottom_desktop",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Text bottom margin (desktop)",
      "default": 32
    },
    {
      "type": "range",
      "id": "text_margin_bottom_mobile",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Text bottom margin (mobile)",
      "default": 24
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "SHOP NOW"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Button background",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "button_padding_desktop",
      "min": 3,
      "max": 60,
      "step": 1,
      "unit": "px",
      "label": "Button padding (desktop)",
      "default": 20
    },
    {
      "type": "range",
      "id": "button_padding_mobile",
      "min": 3,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Button padding (mobile)",
      "default": 16
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 60,
      "step": 1,
      "unit": "px",
      "label": "Button border radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "button_font_size_desktop",
      "min": 10,
      "max": 28,
      "step": 1,
      "unit": "px",
      "label": "Button size (desktop)",
      "default": 14
    },
    {
      "type": "range",
      "id": "button_font_size_mobile",
      "min": 10,
      "max": 22,
      "step": 1,
      "unit": "px",
      "label": "Button size (mobile)",
      "default": 13
    },
    {
      "type": "range",
      "id": "button_font_weight",
      "min": 300,
      "max": 900,
      "step": 100,
      "label": "Button weight",
      "default": 600
    },
    {
      "type": "color",
      "id": "button_text_color_hover",
      "label": "Button text color (hover)",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "button_bg_color_hover",
      "label": "Button background (hover)",
      "default": "#333333"
    }
  ],
  "presets": [
    {
      "name": "Image with Text"
    }
  ]
}
{% endschema %}